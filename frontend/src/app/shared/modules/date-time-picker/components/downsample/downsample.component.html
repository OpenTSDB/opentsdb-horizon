
<div class="advanced-toggle">
    <a color="primary" (click)="changeToggle()">More settings</a>
</div>
<form [formGroup]="widgetConfigTime" *ngIf="downsample.enabled">
  <div>
      <div class="config-control downsample-controls">
          <!--<label class="label">Override resolution</label>-->
          <mat-checkbox (change)="checkOverrideResolution($event)">Override resolution</mat-checkbox>
          <div class="form-field-group" *ngIf="overrideResolution">
              <mat-radio-group formControlName="downsample">
                  <mat-radio-button *ngFor="let downsample of timeDownsampleOptions" [value]="downsample.value" name="selectedDownsample">{{ downsample.label }}</mat-radio-button>
                  <mat-radio-button [value]="'custom'" name="selectedDownsample">Custom</mat-radio-button>
                  <div class="custom-downsample">
                      <mat-form-field appearance="fill">
                          <input matInput  formControlName="customDownsampleValue" autocomplete="off">
                      </mat-form-field>
                      <mat-button-toggle-group  class="mat-button-toggle-group-horizontal" formControlName="customDownsampleUnit">
                          <mat-button-toggle value="s" name="customDownsampleUnit">Secs</mat-button-toggle>
                          <mat-button-toggle value="m" name="customDownsampleUnit">Min</mat-button-toggle>
                          <mat-button-toggle value="h" name="customDownsampleUnit">Hrs</mat-button-toggle>
                      </mat-button-toggle-group>
                      <div *ngIf="widgetConfigTime.controls.customDownsampleValue.errors">
                          <div *ngIf="widgetConfigTime.controls.customDownsampleValue.errors.required">Should not be empty.</div>
                          <div *ngIf="widgetConfigTime.controls.customDownsampleValue.errors.pattern">Must be an integer.</div>
                          <div *ngIf="widgetConfigTime.controls.customDownsampleValue.errors.min">Should be >= {{widgetConfigTime.controls.customDownsampleValue.errors.min.min}} </div>
                      </div>
                  </div>
              </mat-radio-group>
              <!-- just to see if it changed ok
                  <span style="color: red;">{{ this.widgetConfigTime.get('selectedDownsample').value }}</span> -->
          </div>
      </div>
      <div class="config-control aggregator-controls">
          <!--<label class="label">Override Aggregator</label>-->
          <mat-checkbox (change)="checkOverrideAggregator($event)">Override Aggregator</mat-checkbox>
          <div class="form-field-group mat-select" *ngIf="overrideAggregator">
              <mat-form-field appearance="fill">
                  <mat-select [value]="selectedAggregators[0]" *ngIf="!multipleAggregators" (selectionChange)="setAggregator($event)" disableOptionCentering="true">
                      <mat-option *ngFor="let aggregator of timeAggregatorOptions" [value]="aggregator.value">{{ aggregator.label }}</mat-option>
                  </mat-select>
              </mat-form-field>
              <!---
                  <mat-select [value]="selectedAggregators" *ngIf="multipleAggregators" multiple (selectionChange)="setAggregator($event)">
                      <mat-option *ngFor="let aggregator of timeAggregatorOptions" [value]="aggregator.value">{{ aggregator.label }}</mat-option>
                  </mat-select>

              <mat-checkbox formControlName="multiple">Mutiple</mat-checkbox>-->
          </div>
      </div>
<!--
      <div class="config-control min-interval-controls">
          <label class="label">Minimum Interval</label>
          <div class="form-field-group">
              <mat-form-field appearance="fill">
                  <input matInput placeholder="5" formControlName="minInterval" type="number" autocomplete="off">
              </mat-form-field>
              <mat-button-toggle-group  class="mat-button-toggle-group-horizontal" formControlName="minIntervalUnit">
                  <mat-button-toggle value="s" name="customDownsampleUnit">Secs</mat-button-toggle>
                  <mat-button-toggle value="m" name="customDownsampleUnit">Min</mat-button-toggle>
                  <mat-button-toggle value="h" name="customDownsampleUnit">Hrs</mat-button-toggle>
              </mat-button-toggle-group>
          </div>
      </div>
      <div class="config-control reporting-interval-controls">
          <label class="label">Reporting Interval</label>
          <div class="form-field-group">
              <mat-form-field appearance="fill">
                  <input matInput placeholder="10" formControlName="reportingInterval" type="number" autocomplete="off">
              </mat-form-field>
              <mat-button-toggle-group  class="mat-button-toggle-group-horizontal" formControlName="reportingIntervalUnit">
                  <mat-button-toggle value="s" name="customDownsampleUnit">Secs</mat-button-toggle>
                  <mat-button-toggle value="m" name="customDownsampleUnit">Min</mat-button-toggle>
                  <mat-button-toggle value="h" name="customDownsampleUnit">Hrs</mat-button-toggle>
              </mat-button-toggle-group>
          </div>
      </div>
    -->
  </div>

</form>
