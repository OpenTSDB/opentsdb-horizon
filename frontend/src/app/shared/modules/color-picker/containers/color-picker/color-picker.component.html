<!-- dropDown (with button) -->
<ng-container *ngIf="pickerMode === dropDown">

    <div class="color-picker-wrapper" (click)="toggle()" cdkOverlayOrigin #trigger="cdkOverlayOrigin">
        <div class="color-picker-flex">
            <div class="color-picker-infix">
                <div class="color-picker-trigger">
                    <div class="color-preview-wrapper" *ngIf="colors[0] !== 'Auto'">
                        <div class="color-preview-chip" [style.background]="colors[0]"></div>
                    </div>
                    <div class="color-hex-value">
                        <span class="color-hex-value-text">{{ colorToName(colors[0]) || colors[0] }}</span>
                    </div>
                    <div class="select-arrow-wrapper">
                        <div class="select-arrow"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <ng-template cdkConnectedOverlay
                 cdkConnectedOverlayHasBackdrop
                 cdkConnectedOverlayBackdropClass="color-picker-backdrop"
                 [cdkConnectedOverlayOrigin]="trigger"
                 [cdkConnectedOverlayOpen]="isOpen"
                 (backdropClick)="backdropClick()">

        <ng-template [cdkPortalOutlet]="overlayPanel"></ng-template>
    </ng-template>

</ng-container>

<!-- dropDownNoButton-->
<ng-container *ngIf="pickerMode === dropDownNoButton && isOpen">
    <ng-template [cdkPortalOutlet]="overlayPanel"></ng-template>
</ng-container>

<!-- Embedded-->
<ng-container *ngIf="pickerMode === embedded">
    <ng-template [cdkPortalOutlet]="overlayPanel"></ng-template>
</ng-container>

<!-- Color Picker Content -->
<ng-template cdkPortal #overlayPanel="cdkPortal">

    <div *ngIf="isOpen" class="color-picker-component-control card" [ngClass]="{'mat-elevation-z4' : pickerMode != embedded}">

        <!-- Default Color Selector -->
        <!--<div *ngIf="mode === 'default'">

            <div *ngIf="enableAuto" class="auto-color" [ngClass]="{'isSelected' : 'Auto'==color}">
                <button mat-raised-button class="auto-color-button" (click)="colorSelected('auto')" matTooltip="System chooses color" matTooltipPosition="below"> Auto </button>
            </div>

            <div class="grid-container">
                <div class="grid-item" *ngFor="let _color of DefaultColors" [ngClass]="{'isSelected' : _color.value==color}">
                    <button mat-raised-button [ngClass]="{'grey-outline' : _color.text=='White'}"
                        [matTooltip]="_color.text" matTooltipPosition="below"
                        class="default-color-button"
                        [style.background-color]="_color.value" (click)="colorSelected(_color.value)">
                    </button>
                </div>
            </div>
        </div>-->

        <!-- Custom Color Selector -->
        <div *ngIf="mode === 'default'">
            <color-picker-selector [selectedColor]="colors[selectedIndex]" [pickerMode]="pickerMode" (changeSelectedColor)="colorSelected($event)"
                (clickedCancel)="backdropClick()" [height]="colorPickerSelectorHeight">
            </color-picker-selector>
            <div class="multi-color" *ngIf="enableMultiSelection">
                <div class="title">Selected Colors</div>
                <button class="btn-single-color" [ngClass]="{'selected': selectedIndex === 0}" mat-flat-button [style.backgroundColor]="colors[0]" (click)="setColorIndex(0)"></button>
                <button class="btn-single-color" [ngClass]="{'selected': selectedIndex === 1}" mat-flat-button [style.backgroundColor]="colors[1]" (click)="setColorIndex(1)">
                    <mat-icon fontSet="denali" fontIcon="d-close-circle-solid" (click)="unsetColorByIndex(1);$event.stopPropagation();"></mat-icon>
                </button>
            </div>
        </div>
        

        <!-- Custom Color Selector -->
        <div *ngIf="mode === 'palette'">
            <div class="palette-container">
                <div *ngFor="let palette of palettes" class="palette-item palette-{{palette.name}}" [ngClass]="{'selected': palette.name === colors[selectedIndex] }" (click)="colorSchemeSelected(palette.name)">
                    <!--<img src="/assets/color-palette-{{palette.name}}.png" />-->
                    <img src="assets/shim.gif" />
                    <span class="image-caption">{{palette.label}}</span>
                </div>
            </div>
        </div>

        <!-- Toggle Default and Custom Color -->
        <div class="toggle" *ngIf="enablePalette">
            <mat-button-toggle-group class="mat-button-toggle-group-horizontal" (change)="toggleSelector($event.value)" [value]="mode">
                <mat-button-toggle mat-flat-button value="default">Default</mat-button-toggle>
                <!--<mat-button-toggle mat-flat-button value="custom">Custom</mat-button-toggle>-->
                <mat-button-toggle mat-flat-button value="palette" *ngIf="enablePalette">Palette</mat-button-toggle>
            </mat-button-toggle-group>
        </div>

    </div>
</ng-template>
